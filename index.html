<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุงุจูุงููุถู ูฺฉู</title>
  <link rel="stylesheet" href="/styles.css" >
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.rtl.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- <header>
  <h1>๐ก ููุงูุงุช ุชฺฉููููฺ</h1>
  <p>ููุดุชูโูุง ุฏุฑุจุงุฑู ุฏูุง ุจุฑูุงููโููุณุ ูุจุ ฺฏุช ู ุขูุฏู ุชฺฉููููฺ!</p>
</header> -->

 <div id="header"></div>


<button id="loginBtn" onclick="openModal()">ูุฑูุฏ</button>

  <!-- ูพุงูพโุขูพ -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <h3>ูุฑูุฏ ุจู ุณุณุชู</h3>
      <input id="user" placeholder="ูุงูโฺฉุงุฑุจุฑ">
      <input id="pass" type="password" placeholder="ุฑูุฒ ุนุจูุฑ">
      <button onclick="login()">ูุฑูุฏ</button>
      <p id="msg" style="color: red;"></p>
    </div>
  </div>


<main class="container py-5">
  <div class="row">

    <!-- ููุงูู 1 -->
    <div class="col-md-6 col-lg-4">
      <div class="article-card">
        <h3>๐ ฺุฑุง ุจุงุฏ ฺฏุชโูุงุจ ุจูุฏ ุจุงุดูุ</h3>
        <p>ฺฏุชโูุงุจ ููุท ุจุฑุง ุจุฑูุงููโููุณโูุง ูุณุช! ูุฑ ฺฉุณ ฺฉู ุชููุฏ ูุญุชูุง ูโฺฉูู ุจุงุฏ ฺฏุช ุฑู ุงุฏ ุจฺฏุฑู...</p>
        <a href="#">ูุทุงูุนู ููุงูู</a>
      </div>
    </div>

    <!-- ููุงูู 2 -->
    <div class="col-md-6 col-lg-4">
      <div class="article-card">
        <h3>๐ง ููุด ูุตููุน ู ุขูุฏู ุดุบู</h3>
        <p>ุขุง ููุด ูุตููุน ูุฑุงุฑู ุฌุง ูุง ุฑู ุจฺฏุฑู ุง ูุง ูุฑุงุฑู ููุด ูุตููุน ุฑู ฺฉูุชุฑู ฺฉููุ</p>
        <a href="#">ูุทุงูุนู ููุงูู</a>
      </div>
    </div> 

    <!-- ููุงูู 3 -->
    <div class="col-md-6 col-lg-4">
      <div class="article-card">
        <h3>๐ HTML ู CSS ูุฏุฑู</h3>
        <p>ุงุฏฺฏุฑ ุทุฑุงุญ ูุจ ูฺโููุช ุงูโูุฏุฑ ุฌุฐุงุจ ูุจูุฏู! ุจุง ฺฉ ุตูุญู ุฎูู ุทุฑุงุญ ฺฉูู...</p>
        <a href="#">ูุทุงูุนู ููุงูู</a>
      </div>
    </div>

  </div>
</main>
  <div id="footer"></div>
<!-- 
<footer>
  <p>ยฉ 2025 ุงุจูุงููุถู ูฺฉู - ุชูุงู ุญููู ูุญููุธ ุงุณุช</p>
</footer> -->



  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>


<script>



    fetch('components/header.html')
      .then(res => res.text())
      .then(data => document.getElementById('header').innerHTML = data);


    fetch('components/footer.html')
      .then(res => res.text())
      .then(data => document.getElementById('footer').innerHTML = data);





async function login() {
  const username = document.getElementById('user').value.trim();
  const password = document.getElementById('pass').value.trim();
  const msg = document.getElementById('msg');
  if (!username || !password) return msg.textContent = 'ููู ููุฏูุง ุฑุง ูพุฑ ฺฉูุฏ';

  try {
    const res = await fetch('https://login.digiscopezero.workers.dev/login', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ username, password })
    });
    const data = await res.json();

    if (res.ok) {
      // ุฐุฎุฑู ุฏุฑ localStorage
      localStorage.setItem('loggedIn', username);

      // ุจุณุชู ูพุงูพโุขูพ
      closeModal();

      // ูพููุงู ฺฉุฑุฏู ุฏฺฉูู ูุฑูุฏ
      document.getElementById('loginBtn').style.display = 'none';

      // ููุงุด ูพุงู ุฎูุดโุขูุฏ
      const welcome = document.createElement('span');
      welcome.textContent = `ุณูุงู ${username}`;
      welcome.style.marginLeft = '1rem';
      document.querySelector('header').appendChild(welcome);
    } else {
      msg.textContent = data.error || 'ุฎุทุง';
    }
  } catch (e) {
    msg.textContent = 'ุฎุทุง ุดุจฺฉู';
  }
}

function openModal() {
  document.getElementById('loginModal').style.display = 'flex';
}
function closeModal() {
  document.getElementById('loginModal').style.display = 'none';
}

// ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ: ุงฺฏุฑ ูุจูุงู ูุงุฑุฏ ุดุฏู ุจูุฏู
window.addEventListener('DOMContentLoaded', () => {
  const user = localStorage.getItem('loggedIn');
  if (user) {
    document.getElementById('loginBtn').style.display = 'none';
    const welcome = document.createElement('span');
    welcome.textContent = `ุณูุงู ${user}`;
    welcome.style.marginLeft = '1rem';
    document.querySelector('header').appendChild(welcome);
  }
});
</script>
  

</body>
</html>